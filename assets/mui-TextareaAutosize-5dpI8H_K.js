import{a as N,_ as H}from"./@babel-CoH1aX8U.js";import{r as s,j as w}from"./react-BgJWeQTy.js";import{e as _,E as z,v as C,I as j}from"./@mui-UoK_28Vw.js";const B=["onChange","maxRows","minRows","style","value"];function f(o){return parseInt(o,10)||0}const I={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function L(o){return o==null||Object.keys(o).length===0||o.outerHeightStyle===0&&!o.overflowing}const $=s.forwardRef(function(l,E){const{onChange:p,maxRows:g,minRows:c=1,style:v,value:y}=l,T=N(l,B),{current:W}=s.useRef(y!=null),u=s.useRef(null),O=_(E,u),R=s.useRef(null),b=s.useRef(null),m=s.useCallback(()=>{const t=u.current,e=z(t).getComputedStyle(t);if(e.width==="0px")return{outerHeightStyle:0,overflowing:!1};const n=b.current;n.style.width=e.width,n.value=t.value||l.placeholder||"x",n.value.slice(-1)===`
`&&(n.value+=" ");const h=e.boxSizing,a=f(e.paddingBottom)+f(e.paddingTop),A=f(e.borderBottomWidth)+f(e.borderTopWidth),S=n.scrollHeight;n.value="x";const x=n.scrollHeight;let r=S;c&&(r=Math.max(Number(c)*x,r)),g&&(r=Math.min(Number(g)*x,r)),r=Math.max(r,x);const F=r+(h==="border-box"?a+A:0),M=Math.abs(r-S)<=1;return{outerHeightStyle:F,overflowing:M}},[g,c,l.placeholder]),d=s.useCallback(()=>{const t=m();if(L(t))return;const i=t.outerHeightStyle,e=u.current;R.current!==i&&(R.current=i,e.style.height=`${i}px`),e.style.overflow=t.overflowing?"hidden":""},[m]);C(()=>{const t=()=>{d()};let i;const e=j(t),n=u.current,h=z(n);h.addEventListener("resize",e);let a;return typeof ResizeObserver<"u"&&(a=new ResizeObserver(t),a.observe(n)),()=>{e.clear(),cancelAnimationFrame(i),h.removeEventListener("resize",e),a&&a.disconnect()}},[m,d]),C(()=>{d()});const k=t=>{W||d(),p&&p(t)};return w.jsxs(s.Fragment,{children:[w.jsx("textarea",H({value:y,onChange:k,ref:O,rows:c,style:v},T)),w.jsx("textarea",{"aria-hidden":!0,className:l.className,readOnly:!0,ref:b,tabIndex:-1,style:H({},I.shadow,v,{paddingTop:0,paddingBottom:0})})]})});export{$ as T};
