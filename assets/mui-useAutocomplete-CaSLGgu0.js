import{_ as Le}from"./@babel-CoH1aX8U.js";import{r as p}from"./react-BgJWeQTy.js";import{L as lt,u as ue,f as st,l as Y,K as it}from"./@mui-UoK_28Vw.js";function $e(f){return typeof f.normalize<"u"?f.normalize("NFD").replace(/[\u0300-\u036f]/g,""):f}function ut(f={}){const{ignoreAccents:S=!0,ignoreCase:h=!0,limit:L,matchFrom:ee="any",stringify:q,trim:F=!1}=f;return($,{inputValue:B,getOptionLabel:R})=>{let C=F?B.trim():B;h&&(C=C.toLowerCase()),S&&(C=$e(C));const _=C?$.filter(te=>{let I=(q||R)(te);return h&&(I=I.toLowerCase()),S&&(I=$e(I)),ee==="start"?I.indexOf(C)===0:I.indexOf(C)>-1}):$;return typeof L=="number"?_.slice(0,L):_}}function Z(f,S){for(let h=0;h<f.length;h+=1)if(S(f[h]))return h;return-1}const at=ut(),Ee=5,ct=f=>{var S;return f.current!==null&&((S=f.current.parentElement)==null?void 0:S.contains(document.activeElement))};function gt(f){const{unstable_isActiveElementInListbox:S=ct,unstable_classNamePrefix:h="Mui",autoComplete:L=!1,autoHighlight:ee=!1,autoSelect:q=!1,blurOnSelect:F=!1,clearOnBlur:$=!f.freeSolo,clearOnEscape:B=!1,componentName:R="useAutocomplete",defaultValue:C=f.multiple?[]:null,disableClearable:_=!1,disableCloseOnSelect:te=!1,disabled:I,disabledItemsFocusable:He=!1,disableListWrap:ae=!1,filterOptions:Fe=at,filterSelectedOptions:ce=!1,freeSolo:V=!1,getOptionDisabled:z,getOptionKey:fe,getOptionLabel:de=t=>{var e;return(e=t.label)!=null?e:t},groupBy:U,handleHomeEndKeys:pe=!f.freeSolo,id:Re,includeInputInList:ge=!1,inputValue:Ve,isOptionEqualToValue:M=(t,e)=>t===e,multiple:i=!1,onChange:he,onClose:be,onHighlightChange:xe,onInputChange:w,onOpen:me,open:Me,openOnFocus:ve=!1,options:Ke,readOnly:v=!1,selectOnFocus:Ne=!f.freeSolo,value:qe}=f,m=lt(Re);let b=de;b=t=>{const e=de(t);return typeof e!="string"?String(e):e};const ne=p.useRef(!1),re=p.useRef(!0),d=p.useRef(null),O=p.useRef(null),[W,Be]=p.useState(null),[y,oe]=p.useState(-1),Oe=ee?0:-1,g=p.useRef(Oe),[o,_e]=ue({controlled:qe,default:C,name:R}),[s,j]=ue({controlled:Ve,default:"",name:R,state:"inputValue"}),[G,ye]=p.useState(!1),J=p.useCallback((t,e)=>{if(!(i?o.length<e.length:e!==null)&&!$)return;let r;if(i)r="";else if(e==null)r="";else{const l=b(e);r=typeof l=="string"?l:""}s!==r&&(j(r),w&&w(t,r,"reset"))},[b,s,i,w,j,$,o]),[E,Ie]=ue({controlled:Me,default:!1,name:R,state:"open"}),[ze,ke]=p.useState(!0),Se=!i&&o!=null&&s===b(o),x=E&&!v,u=x?Fe(Ke.filter(t=>!(ce&&(i?o:[o]).some(e=>e!==null&&M(t,e)))),{inputValue:Se&&ze?"":s,getOptionLabel:b}):[],D=st({filteredOptions:u,value:o,inputValue:s});p.useEffect(()=>{const t=o!==D.value;G&&!t||V&&!t||J(null,o)},[o,J,G,D.value,V]);const le=E&&u.length>0&&!v,Q=Y(t=>{t===-1?d.current.focus():W.querySelector(`[data-tag-index="${t}"]`).focus()});p.useEffect(()=>{i&&y>o.length-1&&(oe(-1),Q(-1))},[o,i,y,Q]);function Ue(t,e){if(!O.current||t<0||t>=u.length)return-1;let n=t;for(;;){const r=O.current.querySelector(`[data-option-index="${n}"]`),l=He?!1:!r||r.disabled||r.getAttribute("aria-disabled")==="true";if(r&&r.hasAttribute("tabindex")&&!l)return n;if(e==="next"?n=(n+1)%u.length:n=(n-1+u.length)%u.length,n===t)return-1}}const A=Y(({event:t,index:e,reason:n="auto"})=>{if(g.current=e,e===-1?d.current.removeAttribute("aria-activedescendant"):d.current.setAttribute("aria-activedescendant",`${m}-option-${e}`),xe&&xe(t,e===-1?null:u[e],n),!O.current)return;const r=O.current.querySelector(`[role="option"].${h}-focused`);r&&(r.classList.remove(`${h}-focused`),r.classList.remove(`${h}-focusVisible`));let l=O.current;if(O.current.getAttribute("role")!=="listbox"&&(l=O.current.parentElement.querySelector('[role="listbox"]')),!l)return;if(e===-1){l.scrollTop=0;return}const a=O.current.querySelector(`[data-option-index="${e}"]`);if(a&&(a.classList.add(`${h}-focused`),n==="keyboard"&&a.classList.add(`${h}-focusVisible`),l.scrollHeight>l.clientHeight&&n!=="mouse"&&n!=="touch")){const c=a,k=l.clientHeight+l.scrollTop,Te=c.offsetTop+c.offsetHeight;Te>k?l.scrollTop=Te-l.clientHeight:c.offsetTop-c.offsetHeight*(U?1.3:0)<l.scrollTop&&(l.scrollTop=c.offsetTop-c.offsetHeight*(U?1.3:0))}}),P=Y(({event:t,diff:e,direction:n="next",reason:r="auto"})=>{if(!x)return;const a=Ue((()=>{const c=u.length-1;if(e==="reset")return Oe;if(e==="start")return 0;if(e==="end")return c;const k=g.current+e;return k<0?k===-1&&ge?-1:ae&&g.current!==-1||Math.abs(e)>1?0:c:k>c?k===c+1&&ge?-1:ae||Math.abs(e)>1?c:0:k})(),n);if(A({index:a,reason:r,event:t}),L&&e!=="reset")if(a===-1)d.current.value=s;else{const c=b(u[a]);d.current.value=c,c.toLowerCase().indexOf(s.toLowerCase())===0&&s.length>0&&d.current.setSelectionRange(s.length,c.length)}}),We=()=>{const t=(e,n)=>{const r=e?b(e):"",l=n?b(n):"";return r===l};if(g.current!==-1&&D.filteredOptions&&D.filteredOptions.length!==u.length&&D.inputValue===s&&(i?o.length===D.value.length&&D.value.every((e,n)=>b(o[n])===b(e)):t(D.value,o))){const e=D.filteredOptions[g.current];if(e)return Z(u,n=>b(n)===b(e))}return-1},se=p.useCallback(()=>{if(!x)return;const t=We();if(t!==-1){g.current=t;return}const e=i?o[0]:o;if(u.length===0||e==null){P({diff:"reset"});return}if(O.current){if(e!=null){const n=u[g.current];if(i&&n&&Z(o,l=>M(n,l))!==-1)return;const r=Z(u,l=>M(l,e));r===-1?P({diff:"reset"}):A({index:r});return}if(g.current>=u.length-1){A({index:u.length-1});return}A({index:g.current})}},[u.length,i?!1:o,ce,P,A,x,s,i]),je=Y(t=>{it(O,t),t&&se()});p.useEffect(()=>{se()},[se]);const T=t=>{E||(Ie(!0),ke(!0),me&&me(t))},K=(t,e)=>{E&&(Ie(!1),be&&be(t,e))},H=(t,e,n,r)=>{if(i){if(o.length===e.length&&o.every((l,a)=>l===e[a]))return}else if(o===e)return;he&&he(t,e,n,r),_e(e)},X=p.useRef(!1),N=(t,e,n="selectOption",r="options")=>{let l=n,a=e;if(i){a=Array.isArray(o)?o.slice():[];const c=Z(a,k=>M(e,k));c===-1?a.push(e):r!=="freeSolo"&&(a.splice(c,1),l="removeOption")}J(t,a),H(t,a,l,{option:e}),!te&&(!t||!t.ctrlKey&&!t.metaKey)&&K(t,l),(F===!0||F==="touch"&&X.current||F==="mouse"&&!X.current)&&d.current.blur()};function Ge(t,e){if(t===-1)return-1;let n=t;for(;;){if(e==="next"&&n===o.length||e==="previous"&&n===-1)return-1;const r=W.querySelector(`[data-tag-index="${n}"]`);if(!r||!r.hasAttribute("tabindex")||r.disabled||r.getAttribute("aria-disabled")==="true")n+=e==="next"?1:-1;else return n}}const Ce=(t,e)=>{if(!i)return;s===""&&K(t,"toggleInput");let n=y;y===-1?s===""&&e==="previous"&&(n=o.length-1):(n+=e==="next"?1:-1,n<0&&(n=0),n===o.length&&(n=-1)),n=Ge(n,e),oe(n),Q(n)},De=t=>{ne.current=!0,j(""),w&&w(t,"","clear"),H(t,i?[]:null,"clear")},Je=t=>e=>{if(t.onKeyDown&&t.onKeyDown(e),!e.defaultMuiPrevented&&(y!==-1&&["ArrowLeft","ArrowRight"].indexOf(e.key)===-1&&(oe(-1),Q(-1)),e.which!==229))switch(e.key){case"Home":x&&pe&&(e.preventDefault(),P({diff:"start",direction:"next",reason:"keyboard",event:e}));break;case"End":x&&pe&&(e.preventDefault(),P({diff:"end",direction:"previous",reason:"keyboard",event:e}));break;case"PageUp":e.preventDefault(),P({diff:-Ee,direction:"previous",reason:"keyboard",event:e}),T(e);break;case"PageDown":e.preventDefault(),P({diff:Ee,direction:"next",reason:"keyboard",event:e}),T(e);break;case"ArrowDown":e.preventDefault(),P({diff:1,direction:"next",reason:"keyboard",event:e}),T(e);break;case"ArrowUp":e.preventDefault(),P({diff:-1,direction:"previous",reason:"keyboard",event:e}),T(e);break;case"ArrowLeft":Ce(e,"previous");break;case"ArrowRight":Ce(e,"next");break;case"Enter":if(g.current!==-1&&x){const n=u[g.current],r=z?z(n):!1;if(e.preventDefault(),r)return;N(e,n,"selectOption"),L&&d.current.setSelectionRange(d.current.value.length,d.current.value.length)}else V&&s!==""&&Se===!1&&(i&&e.preventDefault(),N(e,s,"createOption","freeSolo"));break;case"Escape":x?(e.preventDefault(),e.stopPropagation(),K(e,"escape")):B&&(s!==""||i&&o.length>0)&&(e.preventDefault(),e.stopPropagation(),De(e));break;case"Backspace":if(i&&!v&&s===""&&o.length>0){const n=y===-1?o.length-1:y,r=o.slice();r.splice(n,1),H(e,r,"removeOption",{option:o[n]})}break;case"Delete":if(i&&!v&&s===""&&o.length>0&&y!==-1){const n=y,r=o.slice();r.splice(n,1),H(e,r,"removeOption",{option:o[n]})}break}},Qe=t=>{ye(!0),ve&&!ne.current&&T(t)},Pe=t=>{if(S(O)){d.current.focus();return}ye(!1),re.current=!0,ne.current=!1,q&&g.current!==-1&&x?N(t,u[g.current],"blur"):q&&V&&s!==""?N(t,s,"blur","freeSolo"):$&&J(t,o),K(t,"blur")},Xe=t=>{const e=t.target.value;s!==e&&(j(e),ke(!1),w&&w(t,e,"input")),e===""?!_&&!i&&H(t,null,"clear"):T(t)},Ye=t=>{const e=Number(t.currentTarget.getAttribute("data-option-index"));g.current!==e&&A({event:t,index:e,reason:"mouse"})},Ze=t=>{A({event:t,index:Number(t.currentTarget.getAttribute("data-option-index")),reason:"touch"}),X.current=!0},et=t=>{const e=Number(t.currentTarget.getAttribute("data-option-index"));N(t,u[e],"selectOption"),X.current=!1},tt=t=>e=>{const n=o.slice();n.splice(t,1),H(e,n,"removeOption",{option:o[t]})},we=t=>{E?K(t,"toggleInput"):T(t)},nt=t=>{t.currentTarget.contains(t.target)&&t.target.getAttribute("id")!==m&&t.preventDefault()},rt=t=>{t.currentTarget.contains(t.target)&&(d.current.focus(),Ne&&re.current&&d.current.selectionEnd-d.current.selectionStart===0&&d.current.select(),re.current=!1)},ot=t=>{!I&&(s===""||!E)&&we(t)};let ie=V&&s.length>0;ie=ie||(i?o.length>0:o!==null);let Ae=u;return U&&(Ae=u.reduce((t,e,n)=>{const r=U(e);return t.length>0&&t[t.length-1].group===r?t[t.length-1].options.push(e):t.push({key:n,index:n,group:r,options:[e]}),t},[])),I&&G&&Pe(),{getRootProps:(t={})=>Le({"aria-owns":le?`${m}-listbox`:null},t,{onKeyDown:Je(t),onMouseDown:nt,onClick:rt}),getInputLabelProps:()=>({id:`${m}-label`,htmlFor:m}),getInputProps:()=>({id:m,value:s,onBlur:Pe,onFocus:Qe,onChange:Xe,onMouseDown:ot,"aria-activedescendant":x?"":null,"aria-autocomplete":L?"both":"list","aria-controls":le?`${m}-listbox`:void 0,"aria-expanded":le,autoComplete:"off",ref:d,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:I}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:De}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:we}),getTagProps:({index:t})=>Le({key:t,"data-tag-index":t,tabIndex:-1},!v&&{onDelete:tt(t)}),getListboxProps:()=>({role:"listbox",id:`${m}-listbox`,"aria-labelledby":`${m}-label`,ref:je,onMouseDown:t=>{t.preventDefault()}}),getOptionProps:({index:t,option:e})=>{var n;const r=(i?o:[o]).some(a=>a!=null&&M(e,a)),l=z?z(e):!1;return{key:(n=fe==null?void 0:fe(e))!=null?n:b(e),tabIndex:-1,role:"option",id:`${m}-option-${t}`,onMouseMove:Ye,onClick:et,onTouchStart:Ze,"data-option-index":t,"aria-disabled":l,"aria-selected":r}},id:m,inputValue:s,value:o,dirty:ie,expanded:x&&W,popupOpen:x,focused:G||y!==-1,anchorEl:W,setAnchorEl:Be,focusedTag:y,groupedOptions:Ae}}export{ut as c,gt as u};
